<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Envelop Profile</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        h3 {
            text-align: center;
            background-color : #343a40;
            color : white;
            padding: 15px 0;
            margin: 0;
        }
        .search-section {
            text-align: center;
            margin: 20px 0;
        }
        .search-section label {
            margin-right: 10px;
            font-weight: bold;
        }
        .search-section input, .search-section button {
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
        }
        .search-section button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .search-section button:hover {
            background-color: #45a049;
        }
        .report-section {
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #ddd;
        }
        .edit-row {
            display: none;
        }
        .edit-row input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .edit-row button {
            padding: 8px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .edit-row button[type="submit"] {
            background-color: #4CAF50;
            color: white;
        }
        .edit-row button[type="submit"]:hover {
            background-color: #45a049;
        }
        .edit-row button[type="button"] {
            background-color: #f44336;
            color: white;
        }
        .edit-row button[type="button"]:hover {
            background-color: #e53935;
        }
        .header-buttons {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
        }
        .header-buttons a, .header-buttons input[type="submit"] {
            text-decoration: none;
            padding: 10px 15px;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            border: none;
        }
        .header-buttons a {
            background-color: #007bff;
        }
        .header-buttons a:hover {
            background-color: #0056b3;
        }
        .header-buttons input[type="submit"] {
            background-color: #dc3545;
        }
        .header-buttons input[type="submit"]:hover {
            background-color: #c82333;
        }
        .pagination {
            display: flex;
            justify-content: center;
            list-style: none;
            padding: 0;
        }
        .pagination li {
            margin: 0 5px;
        }
        .pagination a {
            display: block;
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            text-decoration: none;
        }
        .pagination a:hover {
            background-color: #0056b3;
        }
        .pagination .page-item input, .pagination .page-item select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 0 5px;
        }
        .pagination .page-item button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .pagination .page-item button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<h3>Envelop Profile</h3>

<div class="search-section">
    <form th:action="@{/dashboard/envelop}" method="get">
        <label for="correl">Search by Correl:</label>
        <input type="number" id="correl" name="correl" th:value="${correl}">
        <button type="submit">Search</button>
    </form>
</div>

<div id="report" class="report-section">
    <table id="report-table">
        <thead>
        <tr>
            <th>Company ID</th>
            <th>Correl</th>
            <th>Location</th>
            <th>Envelope Stock Number</th>
            <th>OSE Or Remit</th>
            <th>Size</th>
            <th>Window</th>
            <th>Color</th>
            <th>Open Window</th>
            <th>Special Description</th>
            <th>Annual Usage</th>
            <th>Comments</th>
            <th>Comments2</th>
            <th>REMIT Selective</th>
            <th>New Envelope Stock Number</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="profile, profileStat : ${profiles}" th:id="'row-' + ${profileStat.index}">
            <!-- View Mode -->
            <td th:text="${profile.companyId}" class="view-row"></td>
            <td th:text="${profile.correl}" class="view-row"></td>
            <td th:text="${profile.location}" class="view-row"></td>
            <td th:text="${profile.envelopeStockNumber}" class="view-row"></td>
            <td th:text="${profile.oseOrRemit}" class="view-row"></td>
            <td th:text="${profile.size}" class="view-row"></td>
            <td th:text="${profile.window}" class="view-row"></td>
            <td th:text="${profile.color}" class="view-row"></td>
            <td th:text="${profile.openWindow}" class="view-row"></td>
            <td th:text="${profile.specialDescription}" class="view-row"></td>
            <td th:text="${profile.annualUssage}" class="view-row"></td>
            <td th:text="${profile.comments}" class="view-row"></td>
            <td th:text="${profile.comments2}" class="view-row"></td>
            <td th:text="${profile.remitSelective}" class="view-row"></td>
            <td th:text="${profile.newEnvelopeStockNumber}" class="view-row"></td>
            <td class="view-row">
                <button th:attr="onclick=|editRow(${profileStat.index})|">Edit</button>
                <button th:attr="onclick=|addenv(${profileStat.index})|">copychange</button>
            </td>
            <!-- Edit Mode -->
            <td colspan="16" class="edit-row" th:id="'edit-row-' + ${profileStat.index}">
                <form th:action="@{/dashboard/envelop/update}" th:method="post">
                    <input type="hidden" th:name="Assurant_Envelope_Profile_Id" th:value="${profile.Assurant_Envelope_Profile_Id}">
                    <table>
                        <tr>
                            <td><input type="number" th:name="companyId" th:value="${profile.companyId}"></td>
                            <td><input type="number" th:name="correl" th:value="${profile.correl}"></td>
                            <td><input type="text" th:name="location" th:value="${profile.location}"></td>
                            <td><input type="text" th:name="envelopeStockNumber" th:value="${profile.envelopeStockNumber}"></td>
                            <td><input type="text" th:name="oseOrRemit" th:value="${profile.oseOrRemit}"></td>
                            <td><input type="text" th:name="size" th:value="${profile.size}"></td>
                            <td><input type="text" th:name="window" th:value="${profile.window}"></td>
                            <td><input type="text" th:name="color" th:value="${profile.color}"></td>
                            <td><input type="text" th:name="openWindow" th:value="${profile.openWindow}"></td>
                            <td><input type="text" th:name="specialDescription" th:value="${profile.specialDescription}"></td>
                            <td><input type="number" th:name="annualUssage" th:value="${profile.annualUssage}"></td>
                            <td><input type="text" th:name="comments" th:value="${profile.comments}"></td>
                            <td><input type="text" th:name="comments2" th:value="${profile.comments2}"></td>
                            <td><input type="text" th:name="remitSelective" th:value="${profile.remitSelective}"></td>
                            <td><input type="text" th:name="newEnvelopeStockNumber" th:value="${profile.newEnvelopeStockNumber}"></td>
                            <td>
                                <button type="submit" onclick="showSuccessAlert()">Save</button>
                                <button type="button" th:attr="onclick=|cancelEdit(${profileStat.index})|">Cancel</button>
                            </td>
                        </tr>
                    </table>
                </form>
            </td>
            <!-- Add new envelop/copy change Mode -->
            <td colspan="16" class="edit-row" th:id="'add-edit-row-' + ${profileStat.index}">
                <form th:action="@{/dashboard/envelop/add}" th:method="post">
                    <table>
                        <tr>
                            <td><input type="number" th:name="companyId" th:value="${profile.companyId}"></td>
                            <td><input type="number" th:name="correl" th:value="${profile.correl}"></td>
                            <td><input type="text" th:name="location" th:value="${profile.location}"></td>
                            <td><input type="text" th:name="envelopeStockNumber" th:value="${profile.envelopeStockNumber}"></td>
                            <td><input type="text" th:name="oseOrRemit" th:value="${profile.oseOrRemit}"></td>
                            <td><input type="text" th:name="size" th:value="${profile.size}"></td>
                            <td><input type="text" th:name="window" th:value="${profile.window}"></td>
                            <td><input type="text" th:name="color" th:value="${profile.color}"></td>
                            <td><input type="text" th:name="openWindow" th:value="${profile.openWindow}"></td>
                            <td><input type="text" th:name="specialDescription" th:value="${profile.specialDescription}"></td>
                            <td><input type="number" th:name="annualUssage" th:value="${profile.annualUssage}"></td>
                            <td><input type="text" th:name="comments" th:value="${profile.comments}"></td>
                            <td><input type="text" th:name="comments2" th:value="${profile.comments2}"></td>
                            <td><input type="text" th:name="remitSelective" th:value="${profile.remitSelective}"></td>
                            <td><input type="text" th:name="newEnvelopeStockNumber" th:value="${profile.newEnvelopeStockNumber}"></td>
                            <td>
                                <button type="submit" onclick="showSuccessAlert()">Add</button>
                                <button type="button" th:attr="onclick=|cancelEdit(${profileStat.index})|">Cancel</button>
                            </td>
                        </tr>
                    </table>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" th:if="${!page.isFirst()}" th:href="@{/dashboard/envelop(page=0, size=${size})}">First</a>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${page.hasPrevious()}" th:href="@{/dashboard/envelop(page=${page.getNumber()-1}, size=${size})}">Previous</a>
            </li>
            <li class="page-item d-flex align-items-center">
                <form th:action="@{/dashboard/envelop}" method="get" class="d-flex align-items-center">
                    <input type="number" name="page" min="0" th:max="${page.totalPages - 1}" class="form-control" placeholder="Page number" style="width: 100px;">
                    <span class="mx-2">of [[${page.totalPages}]]</span>
                    <select name="size" class="form-control mx-2">
                        <option value="3" th:selected="${size == 3}">3</option>
                        <option value="5" th:selected="${size == 5}">5</option>
                        <option value="10" th:selected="${size == 10}">10</option>
                        <option value="20" th:selected="${size == 20}">20</option>
                    </select>
                    <button type="submit" class="btn btn-primary">Go</button>
                </form>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${page.hasNext()}" th:href="@{/dashboard/envelop(page=${page.getNumber()+1}, size=${size})}">Next</a>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${!page.isLast()}" th:href="@{/dashboard/envelop(page=${page.getTotalPages()-1}, size=${size})}">Last</a>
            </li>
        </ul>
    </nav>
</div>

<script th:inline="javascript">
    function editRow(index) {
        document.querySelectorAll('#row-' + index + ' .view-row').forEach(el => el.style.display = 'none');
        document.getElementById('edit-row-' + index).style.display = 'table-cell';
    }

    function addenv(index) {
        document.querySelectorAll('#row-' + index + ' .view-row').forEach(el => el.style.display = 'none');
        document.getElementById('add-edit-row-' + index).style.display = 'table-cell';
    }

    function cancelEdit(index) {
        document.querySelectorAll('#row-' + index + ' .view-row').forEach(el => el.style.display = 'table-cell');
        document.getElementById('edit-row-' + index).style.display = 'none';
        document.getElementById('add-edit-row-' + index).style.display = 'none';
    }

    function showSuccessAlert() {
        alert("Record updated successfully!");
    }
</script>

</body>
</html>
